<view class="container">
  <!-- A: æ‰«ç é¡µé¢ -->
  <view class="section">
    <button class="btn" type="primary" bindtap="onScan">æ‰«ç å®šä½è®¾å¤‡è¯´æ˜ä¹¦</button>
    <view class="tip">åŸå§‹äºŒç»´ç ï¼š{{scanRawText || 'â€”'}}</view>
    <view class="tip">å‹å·ï¼š{{model || 'â€”'}}</view>
    <view class="tip">assistantidï¼š{{assistantid || 'â€”'}}</view>
    <view class="tip">containeridï¼š{{containerid || 'â€”'}}</view>
  </view>

  <!-- B: å…³é”®è¯æœç´¢ -->
  <view class="section">
    <text class="label">å…³é”®è¯æœç´¢</text>
    <view class="input-row">
      <input class="input flex" placeholder="è¯·è¾“å…¥å…³é”®è¯ï¼ˆå¯æŒ‰ä½å³ä¾§å°å–‡å­è¯­éŸ³è¾“å…¥ï¼‰" value="{{keyword}}" bindinput="onKeywordInput" />
      <view class="mic-btn {{recording ? 'recording' : ''}}"
            bindtouchstart="startVoice"
            bindtouchend="stopVoice"
            bindtouchcancel="cancelVoice"
            hover-class="mic-btn-hover">
        <text>{{recording ? 'ğŸ™ è¯´è¯ä¸­' : 'ğŸ¤ è¯­éŸ³'}}</text>
      </view>
    </view>
    <view class="voice-tip">{{voiceSupported ? (recording ? 'æ¾å¼€å®Œæˆ' : 'æŒ‰ä½è¯´è¯') : 'å½“å‰ç¯å¢ƒæš‚ä¸æ”¯æŒè¯­éŸ³è¾“å…¥'}}</view>
    <button class="btn" type="primary" bindtap="onSearchIFU">æœç´¢</button>
    <button class="btn" type="primary" bindtap="onAskIFU">é—®AI</button>
  </view>

  <view class="section" wx:if="{{results.length}}">
    <text class="label">æœç´¢ç»“æœ</text>
    <block wx:for="{{results}}" wx:key="index">
      <view class="result-item" bindtap="onViewDetail" data-snippet="{{item.snippet}}">
        <text class="doc">{{item.docDisplay || item.doc}} - ç¬¬{{item.page}}é¡µ</text>
        <text class="snippet">{{item.snippet}}</text>
      </view>
    </block>
  </view>

  <!-- åˆ†åŒ…æ¼”ç¤ºå…¥å£ -->
  <!-- <view class="section">
    <button class="btn" type="default" bindtap="goToPkgDemo">æ‰“å¼€åˆ†åŒ…ç¤ºä¾‹é¡µ</button>
    <view class="tip">è¯¥é¡µé¢ä½äº packageA/pages/demo/indexï¼Œå°†æŒ‰éœ€åŠ è½½ã€‚</view>
  </view> -->

  <!-- C: å†…å®¹è¯¦æƒ…é¡µï¼ˆæ”¹ä¸ºç›´æ¥å±•ç¤º snippetï¼‰ -->
  <view class="detail-mask" wx:if="{{showDetail}}" bindtap="closeDetail">
    <view class="detail" catchtap="true">
      <view class="detail-title">å†…å®¹è¯¦æƒ…</view>
      <scroll-view scroll-y="true" style="max-height: 50vh;">
        <text class="detail-content">{{detailContent}}</text>
      </scroll-view>
      <button class="btn" bindtap="closeDetail">å…³é—­</button>
    </view>
  </view>
  <!-- D: åº•éƒ¨æŠ•ç¥¨æ  -->
  <view class="vote-bar">
    <button class="vote-btn up" bindtap="onVoteUp">ğŸ‘ å–œæ¬¢ {{votes.up}}</button>
    <button class="vote-btn down" bindtap="onVoteDown">ğŸ‘ ä¸å–œæ¬¢ {{votes.down}}</button>
  </view>
</view>
